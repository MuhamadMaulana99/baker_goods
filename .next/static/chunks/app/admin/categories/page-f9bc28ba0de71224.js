(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{91768:function(e,a,t){Promise.resolve().then(t.bind(t,2394))},2394:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _}});var s=t(57437),n=t(2265),r=t(66070),i=t(62869),l=t(95186),o=t(26815),c=t(26110),d=t(32660),u=t(62720),m=t(99397),f=t(73247),h=t(15868),g=t(18930),x=t(48736),p=t(31047),v=t(27648),j=t(99376),y=t(52652),b=t(96102),N=t(94995),k=t(83464),w=t(69064),Z=t(95778);function _(){let e=y.V.getItem("info"),a=(0,j.useRouter)(),[t,_]=(0,n.useState)([]),[C,S]=(0,n.useState)([]),[z,M]=(0,n.useState)(!1),[R,T]=(0,n.useState)([]),[E,K]=(0,n.useState)(""),[P,B]=(0,n.useState)(!1),[D,V]=(0,n.useState)(!1),[A,H]=(0,n.useState)(!1),[q,I]=(0,n.useState)(null),[O,F]=(0,n.useState)({category_name:""}),Y=(0,Z.Z)(E,1e3);(0,n.useEffect)(()=>{(null==e?void 0:e.token)?B(!0):a.push("/admin")},[e]);let U=async()=>{M(!0);try{let e="".concat("http://localhost:4000","/categories?search=").concat(Y),a=await k.Z.get(e);M(!1),T(a.data)}catch(e){console.error("Error saat fetching:",e),T([]),M(!1),(0,N.S)(e)}},W=async()=>{M(!0);try{await (0,b.Z)().post("/categories",{category_name:null==O?void 0:O.category_name}),F({category_name:""}),V(!1),w.ZP.success("Category berhasil di Tambahkan"),U(),M(!1)}catch(e){V(!1),console.error("Error saat fetching:",e),M(!1),(0,N.S)(e)}},$=async()=>{M(!0);try{await (0,b.Z)().post("/categories/".concat(null==q?void 0:q.id),{category_name:null==O?void 0:O.category_name}),F({category_name:""}),V(!1),w.ZP.success("Category berhasil di Tambahkan"),U(),M(!1)}catch(e){V(!1),console.error("Error saat fetching:",e),M(!1),(0,N.S)(e)}},G=async e=>{M(!0);try{await (0,b.Z)().delete("".concat("http://localhost:4000","/categories/").concat(e)),U(),w.ZP.success(" Category Berhasil Menghapus"),M(!1)}catch(e){console.error("Error saat fetching:",e),M(!1),(0,N.S)(e)}};if((0,n.useEffect)(()=>{U()},[Y]),!P)return(0,s.jsx)("div",{children:"Memuat..."});let L=e=>{F({category_name:null==e?void 0:e.category_name}),I(e),H(!0)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(v.default,{href:"/admin/dashboard",children:(0,s.jsxs)(i.z,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4"}),"Kembali ke Dashboard"]})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Kategori"})]})})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,s.jsxs)(r.Zb,{className:"mb-6",children:[(0,s.jsx)(r.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5"}),"Kategori Pengaduan"]}),(0,s.jsx)(r.SZ,{children:"Kelola sistem pengelompokan pengaduan"})]}),(0,s.jsxs)(c.Vq,{open:D,onOpenChange:V,children:[(0,s.jsx)(c.hg,{asChild:!0,children:(0,s.jsxs)(i.z,{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Tambah Kategori"]})}),(0,s.jsxs)(c.cZ,{children:[(0,s.jsxs)(c.fK,{children:[(0,s.jsx)(c.$N,{children:"Tambah Kategori Baru"}),(0,s.jsx)(c.Be,{children:"Masukkan informasi kategori pengaduan"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(o._,{htmlFor:"edit-name",children:"Nama Kategori"}),(0,s.jsx)(l.I,{id:"edit-name",value:O.category_name,onChange:e=>F({...O,category_name:e.target.value}),placeholder:"Masukkan nama kategori"})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{F({category_name:""}),V(!1)},children:"Batal"}),(0,s.jsx)(i.z,{onClick:W,children:"Tambah"})]})]})]})]})]})}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),(0,s.jsx)(l.I,{placeholder:"Cari kategori...",className:"pl-10",value:E,onChange:e=>K(e.target.value)})]})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(e=>(0,s.jsxs)(r.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,s.jsx)(r.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(r.ll,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5"}),e.category_name]})}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>L(e),children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})}),(0,s.jsx)(i.z,{variant:"destructive",size:"sm",onClick:()=>G(e.id),children:(0,s.jsx)(g.Z,{className:"w-4 h-4"})})]})]})}),(0,s.jsx)(r.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Total Pengaduan:"}),(0,s.jsxs)("span",{className:"font-semibold flex items-center gap-1",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),e.total_complaints]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Dibuat:"}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),e.createdAt]})]})]})})]},e.id))}),0===R.length&&!z&&(0,s.jsx)(r.Zb,{children:(0,s.jsxs)(r.aY,{className:"text-center py-8",children:[(0,s.jsx)(u.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Kategori tidak ditemukan"}),(0,s.jsx)("p",{className:"text-gray-600",children:E?"Coba ubah kata kunci pencarian.":"Silakan tambahkan kategori pertama Anda."})]})}),(0,s.jsx)(c.Vq,{open:A,onOpenChange:H,children:(0,s.jsxs)(c.cZ,{children:[(0,s.jsxs)(c.fK,{children:[(0,s.jsx)(c.$N,{children:"Ubah Kategori"}),(0,s.jsx)(c.Be,{children:"Perbarui informasi kategori pengaduan"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o._,{htmlFor:"edit-name",children:"Nama Kategori"}),(0,s.jsx)(l.I,{id:"edit-name",value:O.category_name,onChange:e=>F({...O,category_name:e.target.value}),placeholder:"Masukkan nama kategori"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(i.z,{variant:"outline",onClick:()=>{F({category_name:""}),H(!1)},children:"Batal"}),(0,s.jsx)(i.z,{onClick:$,children:"Perbarui"})]})]})]})})]})]})}},62869:function(e,a,t){"use strict";t.d(a,{d:function(){return o},z:function(){return c}});var s=t(57437),n=t(2265),r=t(37053),i=t(90535),l=t(94508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,a)=>{let{className:t,variant:n,size:i,asChild:c=!1,...d}=e,u=c?r.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:t})),ref:a,...d})});c.displayName="Button"},66070:function(e,a,t){"use strict";t.d(a,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var s=t(57437),n=t(2265),r=t(94508);let i=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let l=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",t),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},26110:function(e,a,t){"use strict";t.d(a,{$N:function(){return h},Be:function(){return g},Vq:function(){return o},cZ:function(){return m},fK:function(){return f},hg:function(){return c}});var s=t(57437),n=t(2265),r=t(49027),i=t(32489),l=t(94508);let o=r.fC,c=r.xz,d=r.h_;r.x8;let u=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(r.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-white/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});u.displayName=r.aV.displayName;let m=n.forwardRef((e,a)=>{let{className:t,children:n,...o}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(r.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[n,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let f=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};f.displayName="DialogHeader";let h=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(r.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});h.displayName=r.Dx.displayName;let g=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(r.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...n})});g.displayName=r.dk.displayName},95186:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(57437),n=t(2265),r=t(94508);let i=n.forwardRef((e,a)=>{let{className:t,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});i.displayName="Input"},26815:function(e,a,t){"use strict";t.d(a,{_:function(){return c}});var s=t(57437),n=t(2265),r=t(6394),i=t(90535),l=t(94508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(r.f,{ref:a,className:(0,l.cn)(o(),t),...n})});c.displayName=r.f.displayName},52652:function(e,a,t){"use strict";t.d(a,{V:function(){return s}});let s=new(t(93277)).EncryptStorage("__FR#WEB001",{storageType:"localStorage"})},96102:function(e,a,t){"use strict";var s=t(83464),n=t(93277);a.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=new n.EncryptStorage("__FR#WEB001"),t=a.getItem("info"),r=(null==t?void 0:t.token)||"",i=s.Z.create({baseURL:"http://localhost:4000",headers:{Authorization:"Bearer ".concat(r),"Accept-Language":"en"}});return i.interceptors.response.use(e=>e,t=>{var s;return"auth"!==e&&(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status)===403&&(a.clear(),localStorage.clear(),window.location.href="/admin"),Promise.reject(t)}),i}},95778:function(e,a,t){"use strict";var s=t(2265);a.Z=function(e,a){let[t,n]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let t=setTimeout(()=>n(e),a||500);return()=>{clearTimeout(t)}},[e,a]),t}},94995:function(e,a,t){"use strict";let s;t.d(a,{S:function(){return i}});var n=t(69064);let r=!1,i=e=>{var a,t,i;let l=null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status,o=(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.message)||"Terjadi kesalahan",c=(e,a)=>{r||(r=!0,n.ZP.error(o||"Server Error"),clearTimeout(s),s=setTimeout(()=>{r=!1},1e3))};if(401===l){c("Unauthorized","Silakan login ulang");return}switch(l){case 400:case 409:c("Gagal Menghapus Data",o);break;case 403:c("Akses Ditolak","Anda tidak memiliki akses.");break;case 404:c("Data Tidak Ditemukan","Data yang Anda cari tidak tersedia atau mungkin sudah dihapus.");break;case 500:c("Kesalahan Sistem","Terjadi gangguan pada sistem. Silakan coba lagi nanti atau hubungi administrator.");break;default:c("Gangguan Sistem","Kami mengalami kendala saat memproses permintaan Anda.")}}},94508:function(e,a,t){"use strict";t.d(a,{cn:function(){return r}});var s=t(61994),n=t(53335);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.m6)((0,s.W)(a))}},48736:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},99397:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},15868:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(79205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},62720:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(79205).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])}},function(e){e.O(0,[429,64,385,979,476,971,117,744],function(){return e(e.s=91768)}),_N_E=e.O()}]);