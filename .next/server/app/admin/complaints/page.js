(()=>{var e={};e.id=634,e.ids=[634],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},923:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(98565),s(11506),s(35866);var t=s(23191),r=s(88716),l=s(37922),n=s.n(l),i=s(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(a,c);let d=["",{children:["admin",{children:["complaints",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,98565)),"C:\\MuhamadMaulana\\project\\frelance\\project firdaa 2\\complaint-management-system\\app\\admin\\complaints\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,96383)),"C:\\MuhamadMaulana\\project\\frelance\\project firdaa 2\\complaint-management-system\\app\\admin\\complaints\\loading.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"C:\\MuhamadMaulana\\project\\frelance\\project firdaa 2\\complaint-management-system\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,19644)),"C:\\MuhamadMaulana\\project\\frelance\\project firdaa 2\\complaint-management-system\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\MuhamadMaulana\\project\\frelance\\project firdaa 2\\complaint-management-system\\app\\admin\\complaints\\page.tsx"],m="/admin/complaints/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/complaints/page",pathname:"/admin/complaints",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},96569:(e,a,s)=>{Promise.resolve().then(s.bind(s,11877))},11877:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>K});var t=s(10326),r=s(17577),l=s(33071),n=s(90772),i=s(567),c=s(54432),d=s(31048),o=s(87673),m=s(34474),x=s(62288),u=s(48998),h=s(41291),p=s(30361),g=s(69669),j=s(86333),f=s(41137),N=s(88307),v=s(62881);let y=(0,v.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var b=s(79635),w=s(5932),k=s(42887),Z=s(48705),_=s(40765),S=s(37358);let P=(0,v.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var M=s(98091),C=s(90434),q=s(35047),D=s(20784),z=s(11049),A=s(3492);s(44099);var E=s(56413),V=s(40381);function K(){let e=D.V.getItem("info");(0,q.useRouter)();let[a,s]=(0,r.useState)(!1),[v,K]=(0,r.useState)([]),[Q,R]=(0,r.useState)(!1),[B,F]=(0,r.useState)([]),[$,T]=(0,r.useState)(""),[L,G]=(0,r.useState)("all"),[H,I]=(0,r.useState)("all"),[O,Y]=(0,r.useState)(null),[W,U]=(0,r.useState)(""),[X,J]=(0,r.useState)(""),[ee,ea]=(0,r.useState)(!1),es=(0,A.Z)($,1e3),et=async()=>{s(!0);try{let e=await (0,z.Z)().get(`/complaints/filter/${L}/category/${H}?keyword=${es}`);console.log(e,"sss"),K(e?.data),s(!1)}catch(e){throw s(!1),console.error("❌ Gagal ambil semua produk:",e),e}},er=async()=>{s(!0);try{await (0,z.Z)().put(`http://localhost:4000/complaints/${O?.id}`,{status:X,admin_response:W||O?.admin_response,user_id:e?.user?.id}),V.ZP.success("Berhasil Menambahkan Response"),R(!1),et(),s(!1)}catch(e){R(!1),console.error("Error saat fetching:",e),s(!1),(0,E.S)(e)}},el=e=>{switch(e){case"Menunggu":return"bg-yellow-100 text-yellow-800";case"Sedang Diproses":return"bg-blue-100 text-blue-800";case"Selesai":return"bg-green-100 text-green-800";case"Ditolak":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},en=e=>{switch(e){case"Menunggu":default:return t.jsx(u.Z,{className:"w-4 h-4"});case"Sedang Diproses":return t.jsx(h.Z,{className:"w-4 h-4"});case"Selesai":return t.jsx(p.Z,{className:"w-4 h-4"});case"Ditolak":return t.jsx(g.Z,{className:"w-4 h-4"})}},ei=async e=>{s(!0);try{await (0,z.Z)().delete(`http://localhost:4000/complaints/${e}`),et(),V.ZP.success("Berhasil Menghapus"),s(!1)}catch(e){console.error("Error saat fetching:",e),s(!1),(0,E.S)(e)}};return ee?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"flex justify-between items-center h-16",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx(C.default,{href:"/admin/dashboard",children:(0,t.jsxs)(n.z,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[t.jsx(j.Z,{className:"w-4 h-4"}),"Dasbor"]})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Pengaduan"})]})})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,t.jsxs)(l.Zb,{className:"mb-6",children:[t.jsx(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"flex items-center gap-2",children:[t.jsx(f.Z,{className:"w-5 h-5"}),"Filter & Pencarian"]})}),t.jsx(l.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(d._,{htmlFor:"search",children:"Pencarian"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(N.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),t.jsx(c.I,{id:"search",placeholder:"Cari pengaduan...",className:"pl-10",value:$,onChange:e=>T(e.target.value)})]})]}),(0,t.jsxs)("div",{children:[t.jsx(d._,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(m.Ph,{value:L,onValueChange:G,children:[t.jsx(m.i4,{children:t.jsx(m.ki,{})}),(0,t.jsxs)(m.Bw,{children:[t.jsx(m.Ql,{value:"all",children:"Semua Status"}),t.jsx(m.Ql,{value:"Masuk",children:"Menunggu"}),t.jsx(m.Ql,{value:"Diproses",children:"Sedang Diproses"}),t.jsx(m.Ql,{value:"Selesai",children:"Selesai"}),t.jsx(m.Ql,{value:"Ditolak",children:"Ditolak"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx(d._,{htmlFor:"priority",children:"Kategori"}),(0,t.jsxs)(m.Ph,{value:H,onValueChange:I,children:[t.jsx(m.i4,{children:t.jsx(m.ki,{placeholder:"Pilih Kategori"})}),(0,t.jsxs)(m.Bw,{children:[t.jsx(m.Ql,{value:"all",children:"Semua Kategori"}),B?.map(e=>t.jsx(m.Ql,{value:String(e.id),children:e.category_name},e.id))]})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx(n.z,{variant:"outline",onClick:()=>{T(""),G("all"),I("all")},children:"Hapus Filter"})})]})})]}),(0,t.jsxs)(l.Zb,{children:[t.jsx(l.Ol,{children:t.jsx("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.ll,{children:["Daftar Pengaduan (",v?.length,")"]}),t.jsx(l.SZ,{children:"Kelola dan tanggapi pengaduan pelanggan"})]})})}),t.jsx(l.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[v?.map(e=>t.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("h4",{className:"font-medium text-lg",children:e?.code_complaint}),t.jsxs(i.C,{className:`${el(e.status)} flex items-center gap-1`,children:[en(e?.status),e?.status]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(x.Vq,{open:Q,onOpenChange:R,children:[t.jsx(x.hg,{asChild:!0,children:t.jsxs(n.z,{variant:"outline",size:"sm",onClick:()=>{R(!0),Y(e),U(e?.admin_response)},children:[t.jsx(y,{className:"w-4 h-4 mr-1"}),"Lihat"]})}),t.jsxs(x.cZ,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[t.jsxs(x.fK,{children:[t.jsxs(x.$N,{children:["Detail Pengaduan - ",e.code_complaint]}),t.jsx(x.Be,{children:"Kelola status pengaduan dan berikan tanggapan"})]}),O&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-medium",children:"Informasi Pelanggan"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:"Nama:"}),t.jsx("span",{children:O?.customer_name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(w.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:"Email:"}),t.jsx("span",{children:O?.email})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(k.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:"Telepon:"}),t.jsx("span",{children:O?.contact})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-medium",children:"Detail Pengaduan"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Z.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:"Produk:"}),t.jsx("span",{children:O?.product?.product_name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:"Kategori:"}),t.jsx("span",{children:O.category?.category_name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(S.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:"Tanggal Kejadian:"}),t.jsx("span",{children:O?.date_occurrence})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(S.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:"Dikirim Pada:"}),t.jsx("span",{children:O?.createdAt})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"Deskripsi"}),t.jsx("p",{className:"text-gray-600 bg-gray-50 p-3 rounded-lg",children:O?.description})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx(d._,{htmlFor:"newStatus",children:"Perbarui Status"}),t.jsxs(m.Ph,{value:X||O.status,onValueChange:J,children:[t.jsx(m.i4,{children:t.jsx(m.ki,{})}),t.jsxs(m.Bw,{children:[t.jsx(m.Ql,{value:"Masuk",children:"Menunggu"}),t.jsx(m.Ql,{value:"Diproses",children:"Sedang Diproses"}),t.jsx(m.Ql,{value:"Selesai",children:"Selesai"}),t.jsx(m.Ql,{value:"Ditolak",children:"Ditolak"})]})]})]})}),t.jsxs("div",{children:[t.jsx(d._,{htmlFor:"response",children:"Tanggapan"}),t.jsx(o.g,{id:"response",placeholder:"Ketik tanggapan Anda kepada pelanggan...",value:W,onChange:e=>U(e.target.value),rows:3}),t.jsx("div",{className:"flex justify-end mt-2",children:t.jsxs(n.z,{onClick:er,disabled:!W?.trim(),children:[t.jsx(P,{className:"w-4 h-4 mr-1"}),"Kirim Tanggapan"]})})]})]})]})]}),t.jsxs(n.z,{variant:"destructive",size:"sm",onClick:()=>ei(e.id),children:[t.jsx(M.Z,{className:"w-4 h-4 mr-1"}),"Hapus"]})]})]}),t.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{children:e?.customer_name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Z.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{children:e?.product?.product_name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{children:e?.category?.category_name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(S.Z,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{children:e?.createdAt})]})]}),t.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:e?.description})]},e.id)),0===v.length&&(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx(N.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tidak ada pengaduan ditemukan"}),t.jsx("p",{className:"text-gray-600",children:"Coba ubah kata pencarian atau filter Anda."})]})]})})]})]})]}):t.jsx("div",{children:"Loading..."})}},62288:(e,a,s)=>{"use strict";s.d(a,{$N:()=>h,Be:()=>p,Vq:()=>c,cZ:()=>x,fK:()=>u,hg:()=>d});var t=s(10326),r=s(17577),l=s(98958),n=s(94019),i=s(77863);let c=l.fC,d=l.xz,o=l.h_;l.x8;let m=r.forwardRef(({className:e,...a},s)=>t.jsx(l.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-white/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));m.displayName=l.aV.displayName;let x=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(o,{children:[t.jsx(m,{}),(0,t.jsxs)(l.VY,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[a,(0,t.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(n.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));x.displayName=l.VY.displayName;let u=({className:e,...a})=>t.jsx("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});u.displayName="DialogHeader";let h=r.forwardRef(({className:e,...a},s)=>t.jsx(l.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=l.Dx.displayName;let p=r.forwardRef(({className:e,...a},s)=>t.jsx(l.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));p.displayName=l.dk.displayName},87673:(e,a,s)=>{"use strict";s.d(a,{g:()=>n});var t=s(10326),r=s(17577),l=s(77863);let n=r.forwardRef(({className:e,...a},s)=>t.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));n.displayName="Textarea"},20784:(e,a,s)=>{"use strict";s.d(a,{V:()=>t});let t=new(s(8047)).EncryptStorage("__FR#WEB001",{storageType:"localStorage"})},11049:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(44099),r=s(8047);let l=(e="")=>{let a=new r.EncryptStorage("__FR#WEB001"),s=a.getItem("info"),l=s?.token||"",n=t.Z.create({baseURL:"http://localhost:4000",headers:{Authorization:`Bearer ${l}`,"Accept-Language":"en"}});return n.interceptors.response.use(e=>e,s=>("auth"!==e&&s?.response?.status===403&&(a.clear(),localStorage.clear(),window.location.href="/admin"),Promise.reject(s))),n}},3492:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(17577);let r=function(e,a){let[s,r]=(0,t.useState)(e);return s}},41137:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},5932:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},42887:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},96383:(e,a,s)=>{"use strict";function t(){return null}s.r(a),s.d(a,{default:()=>t})},98565:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\MuhamadMaulana\project\frelance\project firdaa 2\complaint-management-system\app\admin\complaints\page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[44,287,459,947,925,1,467],()=>s(923));module.exports=t})();